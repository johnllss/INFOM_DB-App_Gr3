<div class="list-group">
  {% for item in items %}
      <div class="list-group-item d-flex justify-content-between align-items-center">
        <div>
          <h5 class="mb-1">{{ item.name }}</h5>
        </div>
        <div class="text-end">
          <strong>â‚±{{ "%.2f"|format(item.price) }}</strong>
          <button class="btn btn-success ms-3 add-btn" onclick="addToCart('{{ item.item_id }}', this)">Add To Cart</button>
        </div>
      </div>
    {% else %}
      <p>No items available.</p>
    {% endfor %}
</div>

<script>
  function addToCart(itemID, btn){
    fetch("/api/add_to_cart", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({ id: itemID })
    })
    .then(res => res.json())
    .then(data => {
        if (data.status === "success") {

            // remove item from page
            btn.closest(".list-group-item").remove();
        } else {
            alert("Error adding to cart.");
        }
    })
    .catch(err => console.error(err));
  }
</script>